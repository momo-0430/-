import tkinter as tk
import random
import time

# 初始化窗口
root = tk.Tk()
root.title("打地鼠游戏")

# 游戏参数
width = 600
height = 400
whack_time = 1000  # 地鼠在窗口中出现的时间（毫秒）
score = 0  # 分数
game_active = True  # 游戏是否处于进行中

# 创建分数标签
score_label = tk.Label(root, text="分数: 0", font=("Arial", 20))
score_label.pack()

# 创建一个网格，用来显示地鼠的位置
canvas = tk.Canvas(root, width=width, height=height, bg="lightblue")
canvas.pack()

# 地鼠的图片
whack_image = tk.PhotoImage(file="whack.png")  # 使用一个本地的图片文件来代表地鼠
hole_image = tk.PhotoImage(file="hole.png")    # 使用一个本地的图片文件来代表洞

# 游戏逻辑
holes = []
for row in range(3):  # 3行
    for col in range(3):  # 3列
        hole = canvas.create_image(col * 200 + 100, row * 200 + 100, image=hole_image)
        holes.append(hole)

def start_game():
    global score, game_active
    score = 0
    game_active = True
    score_label.config(text=f"分数: {score}")
    show_random_mole()

def show_random_mole():
    if not game_active:
        return
    
    # 隐藏所有地鼠
    canvas.delete("mole")
    
    # 随机选择一个洞口显示地鼠
    random_hole = random.choice(holes)
    canvas.create_image(canvas.coords(random_hole), image=whack_image, tags="mole")
    
    # 设置地鼠出现的时间
    root.after(whack_time, show_random_mole)

def whack(event):
    global score
    if not game_active:
        return
    
    # 判断点击位置是否有地鼠
    for hole in holes:
        if canvas.bbox(hole):
            x1, y1, x2, y2 = canvas.bbox(hole)
            if x1 <= event.x <= x2 and y1 <= event.y <= y2:
                # 增加分数
                score += 1
                score_label.config(text=f"分数: {score}")
                canvas.delete("mole")

# 绑定鼠标点击事件
canvas.bind("<Button-1>", whack)

# 开始游戏按钮
start_button = tk.Button(root, text="开始游戏", font=("Arial", 15), command=start_game)
start_button.pack()

# 启动游戏
root.mainloop()
